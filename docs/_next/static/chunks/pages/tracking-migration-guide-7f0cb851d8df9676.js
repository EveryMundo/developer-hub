(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{994:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tracking-migration-guide",function(){return t(1732)}])},5709:function(e,n){"use strict";n.Z={src:"/developer-hub/docs/_next/static/media/cover.7f2e687e.jpg",height:1600,width:2400,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAFAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAeEAABBAIDAQAAAAAAAAAAAAABAAIDEQQFBhIhMf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/8QAFREBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhEDEQA/ALGbK0Gpk5K3MnndDI5zcQvqLsRQNe0BfxERSMt//9k=",blurWidth:8,blurHeight:5}},1732:function(e,n,t){"use strict";t.r(n),t.d(n,{__toc:function(){return c}});var i=t(4246),r=t(9304),s=t(7284),a=t(1482);t(8233);var o=t(1441),l=t(5709),d=t(2308);let c=[{depth:2,value:"Get Started",id:"get-started"},{depth:3,value:"Existing processes/disadvantages",id:"existing-processesdisadvantages"},{depth:3,value:"Alternative proposal",id:"alternative-proposal"},{depth:2,value:"Concepts/Some examples",id:"conceptssome-examples"},{depth:2,value:"Migration step by step",id:"migration-step-by-step"},{depth:3,value:"Update Registry Script to v0.6.0 or higher",id:"update-registry-script-to-v060-or-higher"},{depth:3,value:"Remove Tracking Package",id:"remove-tracking-package"},{depth:3,value:"Update the function call to fire the tracking event",id:"update-the-function-call-to-fire-the-tracking-event"}];function _createMdxContent(e){let n=Object.assign({h1:"h1",p:"p",img:"img",h2:"h2",strong:"strong",h3:"h3",em:"em",ul:"ul",li:"li",code:"code",pre:"pre",span:"span"},(0,o.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{children:"Tracking Migration Guide"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Tracking Migration Guide Cover",placeholder:"blur",src:l.Z})}),"\n",(0,i.jsx)(n.h2,{id:"get-started",children:"Get Started"}),"\n",(0,i.jsxs)(n.p,{children:["This is a simple guide to migrate the way you use tracking in existing modules of the ",(0,i.jsx)(n.strong,{children:"Developer Hub Ecosystem"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"existing-processesdisadvantages",children:"Existing processes/disadvantages"}),"\n",(0,i.jsxs)(n.p,{children:["Currently modules use the ",(0,i.jsx)(n.em,{children:"Tracking Package"}),", but this mechanism in the context of the ",(0,i.jsx)(n.strong,{children:"Developer Hub Ecosystem"})," modules brings a series of disadvantages listed below and we want to simplify this process."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"Tracking Package"})," is a library that must be imported and used directly by the module, which increases the size of the bundle, when in many cases the module does not need to activate tracking."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"Tracking Package"})," currently has in its code, and by design, configurations of the available tenants and each time a tenant is added an update of the library is needed."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"Tracking Package"})," currently uses microservices endpoints and has saved an ",(0,i.jsx)(n.code,{children:"API Key"})," within the code for this. If this ",(0,i.jsx)(n.code,{children:"API Key"})," expires, all modules would have to be massively updated, causing new deployments."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.em,{children:"Tracking Package"})," currently follows frequent update cycles which would cause unnecessary module deployments."]}),"\n",(0,i.jsxs)(n.li,{children:["Currently the responsibility of installing/importing/updating the ",(0,i.jsx)(n.em,{children:"Tracking Library"})," is assumed by the partners and it should not be that way."]}),"\n",(0,i.jsxs)(n.li,{children:["Currently it is a bit complicated to do QA when using ",(0,i.jsx)(n.em,{children:"Tracking Package"})," by modules."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For these reasons we have been looking for alternative solutions that reduce all these problems and also simplify the ease of QA reviews."}),"\n",(0,i.jsx)(n.h3,{id:"alternative-proposal",children:"Alternative proposal"}),"\n",(0,i.jsxs)(n.p,{children:["Since all modules, regardless of the technology in which their code is developed (say React, Angular, Vue...), must import ",(0,i.jsx)(n.strong,{children:"Registry Script"})," by obligation, we have developed a solution in which the call to the tracking events is the responsibility of that ",(0,i.jsx)(n.strong,{children:"Registry Script"})," library."]}),"\n",(0,i.jsxs)(n.p,{children:["For this purpose, a new function ",(0,i.jsx)(n.code,{children:"trackEvent"})," has been created, whose implementation is basically an empty code that receives the ",(0,i.jsx)(n.code,{children:"eventObject"})," that have been defined when using the ",(0,i.jsx)(n.em,{children:"Tracking Package"}),". It would no longer be necessary to import or install the ",(0,i.jsx)(n.em,{children:"Tracking Package"}),", just use this new function defined in ",(0,i.jsx)(n.strong,{children:"Registry Script"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This new function would be practically empty code by definition. Its job is to redirect calls to the ",(0,i.jsx)(n.em,{children:"Tracking Package"}),", and this would only work when the tracking resources are dynamically inserted into the Iframe and for a tenant/module combination. This dynamic insertion would be done by the platform and would be outside the partner context. We repeat: it will no longer be necessary to import/install the ",(0,i.jsx)(n.em,{children:"Tracking Package"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Advantages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The module's bundle size is reduced, it no longer needs the Tracking Package."}),"\n",(0,i.jsx)(n.li,{children:"The partner does not need to take responsibility for installing/importing/updating the Tracking Package."}),"\n",(0,i.jsx)(n.li,{children:"Tracking resources will be dynamically inserted by the platform in situations where they are needed."}),"\n",(0,i.jsx)(n.li,{children:"The need for frequent updates to modules and deployments related to updates to the Tracking Package is no longer necessary."}),"\n",(0,i.jsx)(n.li,{children:"Improved ability to do QA reviews to the tracking system: Now visible in the Playground"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"A detailed explanation with examples and the steps required to perform the migration will be explored in the next section."}),"\n",(0,i.jsx)(d.UW,{children:(0,i.jsxs)(n.p,{children:["In this guide, ",(0,i.jsx)(n.strong,{children:"Developer Hub"})," and ",(0,i.jsx)(n.strong,{children:"Registry"})," are used to refer to the same concept."]})}),"\n",(0,i.jsx)(n.h2,{id:"conceptssome-examples",children:"Concepts/Some examples"}),"\n",(0,i.jsx)(n.p,{children:"Industries"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Airlines: ",(0,i.jsx)(n.code,{children:"flights"})]}),"\n",(0,i.jsxs)(n.li,{children:["Hospitality: ",(0,i.jsx)(n.code,{children:"hospitality"})]}),"\n",(0,i.jsxs)(n.li,{children:["Events: ",(0,i.jsx)(n.code,{children:"events"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Current invocation of tracking by the Registry modules"}),"\n",(0,i.jsx)(n.pre,{"data-language":"js","data-theme":"default",children:(0,i.jsxs)(n.code,{"data-language":"js","data-theme":"default",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" formatter "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@everymundo/airmodules-event-datalayer'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// For Vertical Airlines"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"formatter"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".formatAirlines"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(eventObject);"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// For Vertical Hospitality"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"formatter"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".formatHotels"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(eventObject);"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// For Vertical Events"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"formatter"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".formatEvents"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(eventObject);"})]})]})}),"\n",(0,i.jsx)(n.p,{children:"New tracking invocation by Registry modules"}),"\n",(0,i.jsx)(n.pre,{"data-language":"js","data-theme":"default",children:(0,i.jsxs)(n.code,{"data-language":"js","data-theme":"default",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" { trackEvent } "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@everymundo/registry-script'"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// For Vertical Airlines"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"trackEvent"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'flights'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" eventObject);"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// For Vertical Hospitality"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"trackEvent"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'hospitality'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" eventObject);"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// For Vertical Events"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"trackEvent"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'events'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" eventObject);"})]})]})}),"\n",(0,i.jsx)(d.UW,{children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"eventObject"})," remains the same as before"]})}),"\n",(0,i.jsx)(n.h2,{id:"migration-step-by-step",children:"Migration step by step"}),"\n",(0,i.jsxs)(d.Rg,{children:[(0,i.jsxs)(n.h3,{id:"update-registry-script-to-v060-or-higher",children:["Update ",(0,i.jsx)(n.strong,{children:"Registry Script"})," to ",(0,i.jsx)(n.code,{children:"v0.6.0"})," or higher"]}),(0,i.jsx)(n.h3,{id:"remove-tracking-package",children:"Remove Tracking Package"}),(0,i.jsx)(n.h3,{id:"update-the-function-call-to-fire-the-tracking-event",children:"Update the function call to fire the tracking event"})]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.a)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/tracking-migration-guide.mdx",route:"/tracking-migration-guide",timestamp:173496705e4,pageMap:[{kind:"Meta",data:{menu_docs:{title:"Docs",type:"page",href:"/"},index:{title:"Welcome",theme:{breadcrumb:!1}},"get-started":{title:"Get started",theme:{breadcrumb:!1}},learning:{title:"Learning",theme:{breadcrumb:!1}},references:"References","migration-guide":{display:"hidden",title:"Migration Guide"},"tracking-migration-guide":{display:"hidden",title:"Tracking Migration Guide"},tutorial:{title:"Tutorial",type:"page",theme:{sidebar:!1,breadcrumb:!1,toc:!0}},examples:{title:"Examples",type:"page"},menu_tools:{title:"Tools",type:"menu",items:{playground:{title:"Playground",href:"https://everymundo.github.io/developer-hub/playground",newWindow:!0},editor:{title:"Editor",href:"https://everymundo.github.io/developer-hub/editor",newWindow:!0},eds:{title:"EDS Labs",href:"https://everymundo.github.io/registry/stuff/eds/",newWindow:!0},adnetify:{title:"Adnetify Simulator",href:"https://everymundo.github.io/developer-hub/adnetify",newWindow:!0}}}}},{kind:"Folder",name:"examples",route:"/examples",children:[{kind:"Meta",data:{"*":{theme:{sidebar:!0,breadcrumb:!1,toc:!0},display:"hidden"},index:{title:"Examples",display:"children",type:"hidden",theme:{layout:"full"}}}},{kind:"MdxPage",name:"index",route:"/examples"}]},{kind:"Folder",name:"get-started",route:"/get-started",children:[{kind:"Meta",data:{"*":{theme:{breadcrumb:!0}},overview:"Overview","create-a-module":"Create a module",faq:"FAQ"}},{kind:"MdxPage",name:"create-a-module",route:"/get-started/create-a-module"},{kind:"MdxPage",name:"faq",route:"/get-started/faq"},{kind:"MdxPage",name:"overview",route:"/get-started/overview"}]},{kind:"MdxPage",name:"get-started",route:"/get-started"},{kind:"MdxPage",name:"index",route:"/",frontMatter:{title:"Welcome to Developer Hub Documentation"}},{kind:"Folder",name:"learning",route:"/learning",children:[{kind:"Meta",data:{"*":{theme:{breadcrumb:!0}},architecture:"Architecture","setup-file":"Setup.json",editor:"Editor",playground:"Playground","registry-cli":"Registry CLI","registry-script":"Registry Script",workflow:"Workflow"}},{kind:"MdxPage",name:"architecture",route:"/learning/architecture"},{kind:"MdxPage",name:"editor",route:"/learning/editor"},{kind:"MdxPage",name:"playground",route:"/learning/playground"},{kind:"MdxPage",name:"registry-cli",route:"/learning/registry-cli"},{kind:"MdxPage",name:"registry-script",route:"/learning/registry-script"},{kind:"Folder",name:"setup-file",route:"/learning/setup-file",children:[{kind:"Meta",data:{settings:{title:"Settings",theme:{layout:"full",breadcrumb:!0,toc:!1}}}},{kind:"MdxPage",name:"settings",route:"/learning/setup-file/settings"}]},{kind:"MdxPage",name:"setup-file",route:"/learning/setup-file"},{kind:"MdxPage",name:"workflow",route:"/learning/workflow"}]},{kind:"MdxPage",name:"learning",route:"/learning",frontMatter:{order:2}},{kind:"MdxPage",name:"migration-guide",route:"/migration-guide"},{kind:"Folder",name:"references",route:"/references",children:[{kind:"Meta",data:{"*":{theme:{breadcrumb:!0}},iframes:"Iframes","design-system":"Design System (EDS)","services-layer":"Service Layer"}},{kind:"Folder",name:"design-system",route:"/references/design-system",children:[{kind:"Folder",name:"formats",route:"/references/design-system/formats",children:[{kind:"MdxPage",name:"css-variables",route:"/references/design-system/formats/css-variables",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"custom-json-format",route:"/references/design-system/formats/custom-json-format",frontMatter:{sidebar_position:3}},{kind:"MdxPage",name:"index",route:"/references/design-system/formats"},{kind:"MdxPage",name:"json",route:"/references/design-system/formats/json",frontMatter:{sidebar_position:2}},{kind:"Meta",data:{"css-variables":"CSS Variables","custom-json-format":"Custom Json Format",index:"Index",json:"Json"}}]},{kind:"MdxPage",name:"index",route:"/references/design-system"},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"iframes",route:"/references/iframes",children:[{kind:"MdxPage",name:"index",route:"/references/iframes",frontMatter:{order:0}},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"services-layer",route:"/references/services-layer",children:[{kind:"MdxPage",name:"deep-link-service",route:"/references/services-layer/deep-link-service",frontMatter:{order:2}},{kind:"MdxPage",name:"fares-search-service",route:"/references/services-layer/fares-search-service",frontMatter:{order:1}},{kind:"MdxPage",name:"hangar-service",route:"/references/services-layer/hangar-service",frontMatter:{order:3}},{kind:"MdxPage",name:"histogram-service",route:"/references/services-layer/histogram-service",frontMatter:{order:4}},{kind:"MdxPage",name:"index",route:"/references/services-layer",frontMatter:{order:1}},{kind:"Meta",data:{"deep-link-service":"Deep Link Service","fares-search-service":"Fares Search Service","hangar-service":"Hangar Service","histogram-service":"Histogram Service",index:"Index"}}]}]},{kind:"MdxPage",name:"tracking-migration-guide",route:"/tracking-migration-guide"},{kind:"Folder",name:"tutorial",route:"/tutorial",children:[{kind:"Meta",data:{"*":{theme:{sidebar:!0,breadcrumb:!1,toc:!0,pagination:!1},display:"hidden"},index:{title:"Tutorial",display:"normal",type:"hidden"}}},{kind:"MdxPage",name:"index",route:"/tutorial"}]}],flexsearch:{codeblocks:!0},title:"Tracking Migration Guide",headings:c},pageNextRoute:"/tracking-migration-guide",nextraLayout:s.ZP,themeConfig:a.Z};n.default=(0,r.j)(h)}},function(e){e.O(0,[486,168,774,888,179],function(){return e(e.s=994)}),_N_E=e.O()}]);